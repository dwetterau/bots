!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/static/dist/",e(e.s=14)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n){r(this,t),this.a=0,this.b=0,this.a=e,this.b=n}return o(t,[{key:"copy",value:function(){return new t(this.a,this.b)}},{key:"add",value:function(t){this.a+=t.a,this.b+=t.b}},{key:"sub",value:function(t){this.a-=t.a,this.b-=t.b}},{key:"dot",value:function(t){return this.a*t.a+this.b*t.b}},{key:"cross",value:function(t){return this.a*t.b-this.b*t.a}},{key:"proj",value:function(e){var n=this.dot(e);return new t(e.a*n,e.b*n)}},{key:"squareMagnitude",value:function(){return this.a*this.a+this.b*this.b}},{key:"magnitude",value:function(){return Math.sqrt(this.squareMagnitude())}},{key:"normalize",value:function(){var t=this.magnitude();if(0==t)throw Error("Divide by zero error while normalizing vector");this.a/=t,this.b/=t}},{key:"reverse",value:function(){this.a=-this.a,this.b=-this.b}},{key:"scaleInPlace",value:function(t){this.a*=t,this.b*=t}},{key:"scale",value:function(e){return new t(this.a*e,this.b*e)}}]),t}();e.Vector=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){for(var t="0123456789ABCDEF".split(""),e="#",n=0;n<6;n++)e+=t[Math.round(15*Math.random())];return e}function i(){var t="",e=void 0;for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),c=function(){function t(e,n){r(this,t),this.linearDamping=.99,this.angularDamping=.8,this.id=i(),this.position=e,this.velocity=new s.Vector(0,0),this.acceleration=new s.Vector(0,0),this.mass=n,this.rotation=0,this.angularVelocity=0,this.color=o()}return a(t,[{key:"clearForFrame",value:function(){this.forceAccumulator=new s.Vector(0,0),this.torqueAccumulator=0}},{key:"accumulateForce",value:function(t,e){this.forceAccumulator.add(t);var n=new s.Vector(e.a-this.position.a,e.b-this.position.b);this.torqueAccumulator+=n.cross(t)}},{key:"updatePosition",value:function(t){this.position.add(this.velocity.scale(t))}},{key:"updateVelocity",value:function(t){this.velocity.add(this.acceleration.scale(t))}},{key:"setAcceleration",value:function(){this.lastFrameAcceleration=this.acceleration.copy(),this.lastFrameAcceleration.add(this.forceAccumulator.scale(this.inverseMass())),this.acceleration=this.forceAccumulator.scale(this.inverseMass())}},{key:"setAngularAcceleration",value:function(){this.torqueGenerator&&this.torqueGenerator.apply(this),this.angularAcceleration=this.torqueAccumulator/this.momentOfInertia()}},{key:"updateAngularVelocity",value:function(t){this.angularVelocity+=this.angularAcceleration*t}},{key:"updateRotation",value:function(t){this.setRotation(this.rotation+this.angularVelocity*t)}},{key:"setRotation",value:function(t){this.rotation=t,this.rotation<0?this.rotation+=2*Math.PI:this.rotation>2*Math.PI&&(this.rotation-=2*Math.PI)}},{key:"applyDrag",value:function(t){this.velocity.scaleInPlace(Math.pow(this.linearDamping,t)),this.angularVelocity*=Math.pow(this.angularDamping,t)}},{key:"velocityAtPoint",value:function(t){var e=this.velocity.copy(),n=new s.Vector(-t.b,t.a);return n.normalize(),n.scaleInPlace(this.angularVelocity*t.magnitude()),e.add(n),e}},{key:"inverseMass",value:function(){return 1/this.mass}},{key:"drawSelf",value:function(t,e){throw Error("Abstract method, subclasses must implement.")}},{key:"momentOfInertia",value:function(){throw Error("Abstract method, subclasses must implement.")}},{key:"translateRealWorldPoint",value:function(t){throw Error("Abstract method, subclasses must implement.")}},{key:"translateLocalPoint",value:function(t){throw Error("Abstract method, subclasses must implement.")}},{key:"isInside",value:function(t){throw Error("Abstract method, subclasses must implement.")}}]),t}();e.WorldObject=c},function(t,e){t.exports=React},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=function(){function t(e,n,o,i){r(this,t),this.aa=e,this.ab=n,this.ba=o,this.bb=i}return o(t,[{key:"transform",value:function(t){return new i.Vector(this.aa*t.a+this.ab*t.b,this.ba*t.a+this.bb*t.b)}},{key:"transformTranspose",value:function(t){return new i.Vector(this.aa*t.a+this.ba*t.b,this.ab*t.a+this.bb*t.b)}}],[{key:"fromRotation",value:function(e){return new t(Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e))}}]),t}();e.Matrix=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(0),l=n(3),u=function(t){function e(t,n,i,a){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return s.halfX=0,s.halfY=0,s.halfX=i,s.halfY=a,s}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return this.mass*(4*this.halfX*this.halfX+4*this.halfY*this.halfY)/12}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var n=e.getX(this.position.a),r=e.getY(this.position.b);t.translate(n,r);var o=2*Math.PI-this.rotation;t.rotate(o),t.rect(-this.halfX*e.canvasToGridRatio,-this.halfY*e.canvasToGridRatio,2*this.halfX*e.canvasToGridRatio,2*this.halfY*e.canvasToGridRatio),t.fill(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath(),t.rotate(-o),t.translate(-n,-r)}},{key:"getAxis",value:function(t){var e=l.Matrix.fromRotation(this.rotation).transform(new c.Vector(1-t,t));return e.normalize(),e}},{key:"translateRealWorldPoint",value:function(t){return l.Matrix.fromRotation(this.rotation).transformTranspose(new c.Vector(t.a-this.position.a,t.b-this.position.b))}},{key:"translateLocalPoint",value:function(t){var e=t.copy();return e=l.Matrix.fromRotation(this.rotation).transform(e),e.add(this.position),e}},{key:"transformToAxis",value:function(t){return this.halfX*Math.abs(t.dot(this.getAxis(0)))+this.halfY*Math.abs(t.dot(this.getAxis(1)))}},{key:"isInside",value:function(t){var e=this.translateRealWorldPoint(t);return Math.abs(e.a)<=this.halfX&&Math.abs(e.b)<=this.halfY}}]),e}(s.WorldObject);e.Box=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(0),l=n(3),u=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a.radius=0,a.radius=i,a}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return this.mass*(this.radius*this.radius)/2}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var n=e.getX(this.position.a),r=e.getY(this.position.b);t.translate(n,r);var o=2*Math.PI-this.rotation;t.rotate(o);var i=Math.round(this.radius*e.canvasToGridRatio);t.arc(0,0,i,0,2*Math.PI,!1),t.fill(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath(),t.moveTo(-i/2,0),t.lineTo(i/2,0),t.stroke(),t.closePath(),t.moveTo(0,-i/2),t.lineTo(0,i/2),t.stroke(),t.closePath(),t.rotate(-o),t.translate(-n,-r)}},{key:"translateRealWorldPoint",value:function(t){return l.Matrix.fromRotation(this.rotation).transformTranspose(new c.Vector(t.a-this.position.a,t.b-this.position.b))}},{key:"translateLocalPoint",value:function(t){var e=t.copy();return e=l.Matrix.fromRotation(this.rotation).transform(e),e.add(this.position),e}},{key:"isInside",value:function(t){return this.translateRealWorldPoint(t).magnitude()<=this.radius}}]),e}(s.WorldObject);e.Disc=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(0),l=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,1/0))}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return 1/0}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var n=e.getX(this.position.a),r=e.getY(this.position.b);t.translate(n,r),t.lineWidth=2;t.strokeStyle="#000",t.moveTo(-4,-4),t.lineTo(4,4),t.stroke(),t.closePath(),t.moveTo(-4,4),t.lineTo(4,-4),t.stroke(),t.closePath(),t.translate(-n,-r)}},{key:"translateRealWorldPoint",value:function(t){return new c.Vector(t.a-this.position.a,t.b-this.position.b)}},{key:"translateLocalPoint",value:function(t){return new c.Vector(this.position.a+t.a,this.position.b+t.b)}},{key:"isInside",value:function(t){return!1}}]),e}(s.WorldObject);e.Particle=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(0),l=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,1/0));return a.normal=n,a.offset=n.dot(t),a.squareRadius=i,a}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return 1/0}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var n=new c.Vector(-this.normal.b,this.normal.a);n.scaleInPlace(this.squareRadius),t.moveTo(e.getX(this.position.a+n.a),e.getY(this.position.b+n.b)),n.reverse(),t.lineTo(e.getX(this.position.a+n.a),e.getY(this.position.b+n.b)),t.lineWidth=2,t.stroke(),t.closePath()}},{key:"translateRealWorldPoint",value:function(t){return new c.Vector(t.a-this.position.a,t.b-this.position.b)}},{key:"translateLocalPoint",value:function(t){return new c.Vector(this.position.a+t.a,this.position.b+t.b)}},{key:"isInside",value:function(t){return!1}}]),e}(s.WorldObject);e.Plane=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n,o,i,a,s){r(this,t),this.k=e,this.l=n,this.o1=o,this.p1=i,this.o2=a,this.p2=s}return o(t,[{key:"accumulateForces",value:function(){var t=this.o1.translateLocalPoint(this.p1),e=this.o2.translateLocalPoint(this.p2),n=e.copy();n.sub(t);var r=n.magnitude()-this.l;r!=-this.l&&(n.normalize(),n.scaleInPlace(this.k*r),this.o1.accumulateForce(n,t),n.reverse(),this.o2.accumulateForce(n,e))}},{key:"drawSelf",value:function(t,e){t.beginPath();var n=this.o1.translateLocalPoint(this.p1),r=this.o2.translateLocalPoint(this.p2);t.moveTo(e.getX(n.a),e.getY(n.b)),t.lineTo(e.getX(r.a),e.getY(r.b)),t.stroke(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath()}}]),t}();e.Spring=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),c=n(27),l=n(28),u=n(12),f=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return i(e,t),a(e,[{key:"render",value:function(){var t=this,e=function(){return s.createElement("div",null,t.props.message,s.createElement(u.GameCanvas,null))};return s.createElement("div",null,s.createElement(l.BrowserRouter,null,s.createElement("div",null,s.createElement(c.Route,{path:"/",component:e}))))}}]),e}(s.Component);e.App=f},function(t,e,n){var r=n(23);"string"==typeof r&&(r=[[t.i,r,""]]);var o={};o.transform=void 0;n(25)(r,o);r.locals&&(t.exports=r.locals)},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var c=n(2),l=n(22),u=n(0),f=n(8),h=n(21),v=n(6),p=n(13),d={bodySpec:{width:20,height:8,mass:20},wheelSpec:{radius:3,mass:5,offsetX:5,offsetY:-4},wheelSpringSpec:{springConstant:5e4,restLength:.5,offsetX:1,offsetY:0}},y=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.ctx=null,t.intervalID=null,t.DRAW_INTERVAL=5,t.simulation=null,t.width=0,t.height=0,t.canvasToGridRatio=0,t.specText=[JSON.stringify(d,null,4),JSON.stringify(d,null,4)],t.initialOffsetX=15,t.initialOffsetY=10,t.wheelTorque=500,t.wheelGovernor=6,t.dragging=!1,t}return i(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.game_canvas;this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,e.style.width=this.width+"px",e.style.height=this.height+"px";var n=Math.round(100*e.width/e.height);this.canvasToGridRatio=this.height/100,this.intervalID=setInterval(this.draw.bind(this),this.DRAW_INTERVAL),this.simulation=new l.World(100,n),this.renderingInfo={canvasToGridRatio:this.canvasToGridRatio,height:this.height,getX:function(e){return e*t.canvasToGridRatio},getY:function(e){return t.height-e*t.canvasToGridRatio}},this.resetGame(),document.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("mousedown",this.onMouseDown.bind(this,e)),e.addEventListener("mousemove",this.onMouseMove.bind(this,e)),e.addEventListener("mouseup",this.onMouseUp.bind(this,e))}},{key:"resetGame",value:function(){var t=this.parseSpecs();this.bots=[],this.wheelMotors=[new h.TorqueGenerator(-this.wheelTorque,this.wheelGovernor),new h.TorqueGenerator(this.wheelTorque,this.wheelGovernor)],this.simulation.reset();var e=!0,n=!1,r=void 0;try{for(var o,i=t.entries()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=a(o.value,2),c=s[0],l=s[1],f=1==c?this.simulation.width-this.initialOffsetX:this.initialOffsetX;this.bots.push(new p.Bot(new u.Vector(f,this.initialOffsetY),l)),this.bots[c].addWheelMotor(this.wheelMotors[c]),this.simulation.addAssembly(this.bots[c])}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"parseSpecs",value:function(){for(var t=[],e=[0,1],n=0;n<e.length;n++){var r=e[n],o=this.refs["bot"+(r+1)+"_spec"].value;t.push(JSON.parse(o))}return t}},{key:"onSpecChange",value:function(t,e){this.specText[t]=e.target.value}},{key:"onResetPush",value:function(){this.resetGame()}},{key:"onKeyPress",value:function(t){65==t.which&&(this.wheelMotors[0].torque=Math.abs(this.wheelMotors[0].torque)),68==t.which&&(this.wheelMotors[0].torque=-Math.abs(this.wheelMotors[0].torque)),37==t.which&&(this.wheelMotors[1].torque=Math.abs(this.wheelMotors[1].torque)),39==t.which&&(this.wheelMotors[1].torque=-Math.abs(this.wheelMotors[1].torque))}},{key:"onMouseDown",value:function(t,e){if(!this.dragging){var n=this.getGridVector(t,e),r=this.simulation.objectUnderPoint(n),o=a(r,2),i=o[0],s=o[1];null!=s&&(this.mouseParticle=new v.Particle(n),this.simulation.objects.push(this.mouseParticle),this.draggingSpring=new f.Spring(100,5,this.mouseParticle,new u.Vector(0,0),s,i),this.simulation.springs.push(this.draggingSpring),this.dragging=!0)}}},{key:"onMouseMove",value:function(t,e){this.dragging&&(this.mouseParticle.position=this.getGridVector(t,e))}},{key:"onMouseUp",value:function(t,e){this.dragging&&(this.dragging=!1,this.simulation.removeObject(this.mouseParticle))}},{key:"getGridVector",value:function(t,e){var n=e.x-t.offsetLeft,r=this.height-(e.y-t.offsetTop),o=n/this.canvasToGridRatio,i=r/this.canvasToGridRatio;return new u.Vector(o,i)}},{key:"componentWillUnmount",value:function(){this.intervalID&&clearInterval(this.intervalID)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"draw",value:function(){this.clear(),this.simulation.moveObjects(this.DRAW_INTERVAL);var t=!0,e=!1,n=void 0;try{for(var r,o=this.simulation.objects[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.drawSelf(this.ctx,this.renderingInfo)}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}var i=!0,a=!1,s=void 0;try{for(var c,l=this.simulation.springs[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value.drawSelf(this.ctx,this.renderingInfo)}}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}this.ctx.fillStyle="#000000";var u=10,f=!0,h=!1,v=void 0;try{for(var p,d=this.simulation.stats()[Symbol.iterator]();!(f=(p=d.next()).done);f=!0){var y=p.value;this.ctx.fillText(y,10,u),u+=10}}catch(t){h=!0,v=t}finally{try{!f&&d.return&&d.return()}finally{if(h)throw v}}}},{key:"render",value:function(){return c.createElement("div",null,c.createElement("canvas",{ref:"game_canvas",width:"800",height:"584"}),c.createElement("div",{className:"bot-containers"},c.createElement("div",{className:"bot-container"},"Bot 1 spec",c.createElement("textarea",{ref:"bot1_spec",onChange:this.onSpecChange.bind(this,0),defaultValue:this.specText[0]})),c.createElement("div",{className:"bot-container"},"Bot 2 spec",c.createElement("textarea",{ref:"bot2_spec",onChange:this.onSpecChange.bind(this,1),defaultValue:this.specText[1]}))),c.createElement("input",{type:"button",onClick:this.onResetPush.bind(this),value:"Reset"}))}}]),e}(c.Component);e.GameCanvas=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};Object.defineProperty(e,"__esModule",{value:!0});var c=n(15),l=n(0),u=n(4),f=n(5),h=n(8),v=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setObjects",i).call(i,[new u.Box(t,n.bodySpec.mass,n.bodySpec.width/2,n.bodySpec.height/2),new f.Disc(new l.Vector(t.a-n.wheelSpec.offsetX,t.b+n.wheelSpec.offsetY),n.wheelSpec.mass,n.wheelSpec.radius),new f.Disc(new l.Vector(t.a+n.wheelSpec.offsetX,t.b+n.wheelSpec.offsetY),n.wheelSpec.mass,n.wheelSpec.radius)]);for(var a=[],c=[0,1],v=0;v<c.length;v++)for(var p=c[v],d=0==p?-1:1,y=[-1,1],b=0;b<y.length;b++){var m=y[b];a.push(new h.Spring(n.wheelSpringSpec.springConstant,n.wheelSpringSpec.restLength,i.objects[0],new l.Vector(d*n.wheelSpec.offsetX+m*n.wheelSpringSpec.offsetX,n.wheelSpec.offsetY+n.wheelSpringSpec.offsetY),i.objects[p+1],new l.Vector(0,0)))}return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setSprings",i).call(i,a),i}return i(e,t),a(e,[{key:"addWheelMotor",value:function(t){this.objects[1].torqueGenerator=t,this.objects[2].torqueGenerator=t}}]),e}(c.Assembly);e.Bot=v},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getCookie(t){var e="";if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var o=jQuery.trim(n[r]);if(o.substring(0,t.length+1)==t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}return e}function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(10);var React=__webpack_require__(2),ReactDOM=__webpack_require__(11),app_1=__webpack_require__(9),AppRenderer=function t(e){_classCallCheck(this,t),ReactDOM.render(React.createElement(app_1.App,Object.assign({},e)),document.getElementById("render-target"))};exports.default=AppRenderer;var csrfToken=getCookie("csrftoken");jQuery.ajaxSetup({beforeSend:function(t,e){csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",csrfToken)}}),eval("window.AppRenderer = AppRenderer;")},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){r(this,t),this.objects=[],this.objectIDs={},this.springs=[]}return o(t,[{key:"setObjects",value:function(t){this.objectIDs={},this.objects=t;var e=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.objectIDs[a.id]=!0}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"setSprings",value:function(t){this.springs=t}},{key:"contains",value:function(t){return this.objectIDs[t.id]&&this.objectIDs[t.id]}}]),t}();e.Assembly=i},function(t,e,n){"use strict";function r(t,e){var n=t.translateRealWorldPoint(e.position),r=new s.Vector(0,0),o=n.a;o>t.halfX?o=t.halfX:o<-t.halfX&&(o=-t.halfX),r.a=o,o=n.b,o>t.halfY?o=t.halfY:o<-t.halfY&&(o=-t.halfY),r.b=o;var i=r.copy();if(i.sub(n),(o=i.squareMagnitude())>e.radius*e.radius)return[];var a=t.translateLocalPoint(r);return i=a.copy(),i.sub(e.position),i.normalize(),[{contactNormal:i,contactPoint:a,penetration:e.radius-Math.sqrt(o)}]}function o(t,e,n,r){return t.transformToAxis(n)+e.transformToAxis(n)-Math.abs(n.dot(r))}function i(t,e){var n=e.position.copy();n.sub(t.position);var r=[t.getAxis(0),t.getAxis(1),e.getAxis(0),e.getAxis(1)],i=1/0,c=-1,l=!0,u=!1,f=void 0;try{for(var h,v=r.entries()[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var p=a(h.value,2),d=p[0],y=p[1],b=o(t,e,y,n);if(b<0)return[];b<i&&(i=b,c=d)}}catch(t){u=!0,f=t}finally{try{!l&&v.return&&v.return()}finally{if(u)throw f}}var m=function(t,e){var n=r[c].copy();n.dot(e)>0&&n.reverse();var o=new s.Vector(t.halfX,t.halfY);return t.getAxis(0).dot(n)<0&&(o.a=-o.a),t.getAxis(1).dot(n)<0&&(o.b=-o.b),[n,t.translateLocalPoint(o)]},w=new s.Vector(0,0),g=new s.Vector(0,0);if(c<=1){var j=m(e,n),P=a(j,2);g=P[0],w=P[1]}else{n.reverse();var x=m(t,n),k=a(x,2);g=k[0],w=k[1],g.reverse()}return[{contactNormal:g,contactPoint:w,penetration:i}]}var a=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(0);e.boxToDiscContact=r,e.boxToBoxContact=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=n(19),c=n(7),l=n(20),u=n(4),f=n(16),h=n(6),v=function(){function t(e){r(this,t),this.world=e}return i(t,[{key:"detectContacts",value:function(){for(var t=[],e=0;e<this.world.objects.length;e++)for(var n=this.world.objects[e],r=this.world.objectIDToAssembly[n.id],o=e+1;o<this.world.objects.length;o++){var i=this.world.objects[o];if(!r||!r.contains(i)){var a=!0,s=!1,c=void 0;try{for(var l,u=this.computeContactData(n,i)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value;t.push({data:f,object1Index:e,object2Index:o})}}catch(t){s=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}}}return t}},{key:"flip",value:function(t){return function(e,n){var r=t(n,e);for(var o in r)r[o].contactNormal.reverse();return r}}},{key:"computeContactData",value:function(t,e){var n=[[a.Disc,a.Disc],[a.Disc,c.Plane],[a.Disc,u.Box],[a.Disc,h.Particle],[c.Plane,a.Disc],[c.Plane,c.Plane],[c.Plane,u.Box],[c.Plane,h.Particle],[u.Box,a.Disc],[u.Box,c.Plane],[u.Box,u.Box],[u.Box,h.Particle],[h.Particle,a.Disc],[h.Particle,c.Plane],[h.Particle,u.Box],[h.Particle,h.Particle]],r=function(t,e){return[]},i=[s.discToDiscContact,this.flip(l.planeToDiscContact),this.flip(f.boxToDiscContact),r,l.planeToDiscContact,r,l.planeToBoxContact,r,f.boxToDiscContact,this.flip(l.planeToBoxContact),f.boxToBoxContact,r,r,r,r,r],v=!0,p=!1,d=void 0;try{for(var y,b=n.entries()[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var m=o(y.value,2),w=m[0],g=o(m[1],2),j=g[0],P=g[1];if(t instanceof j&&e instanceof P)return i[w](t,e)}}catch(t){p=!0,d=t}finally{try{!v&&b.return&&b.return()}finally{if(p)throw d}}throw Error("Missing object type handling")}}]),t}();e.ContactGenerator=v},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(3),c=function(){function t(e,n,o){r(this,t),this.friction=.4,this.contact=e,this.contactToWorld=this.computeContactToWorld(e.data.contactNormal),this.relativeContactPosition=[this.contact.data.contactPoint.copy(),this.contact.data.contactPoint.copy()],this.relativeContactPosition[0].sub(n.objects[e.object1Index].position),this.relativeContactPosition[1].sub(n.objects[e.object2Index].position),this.contactVelocity=this.calculateLocalVelocity(0,n.objects[e.object1Index],o),this.contactVelocity.sub(this.calculateLocalVelocity(1,n.objects[e.object2Index],o)),this.desiredDeltaVelocity=this.calculateDesiredDeltaVelocity(n,o)}return i(t,[{key:"computeContactToWorld",value:function(t){return new s.Matrix(t.a,-t.b,t.b,t.a)}},{key:"calculateLocalVelocity",value:function(t,e,n){var r=e.velocityAtPoint(this.relativeContactPosition[t]),o=this.contactToWorld.transformTranspose(r),i=this.contactToWorld.transformTranspose(e.lastFrameAcceleration.scale(n));return i.a=0,o.add(i),o}},{key:"calculateDesiredDeltaVelocity",value:function(t,e){var n=t.objects[this.contact.object1Index],r=t.objects[this.contact.object2Index],o=n.lastFrameAcceleration.scale(e).dot(this.contact.data.contactNormal);o-=r.lastFrameAcceleration.scale(e).dot(this.contact.data.contactNormal);var i=t.Restitution;return Math.abs(this.contactVelocity.a)<t.VelocityLimit&&(i=0),-this.contactVelocity.a-i*(this.contactVelocity.a-o)}},{key:"applyPositionChange",value:function(t,e){var n=[new a.Vector(0,0),new a.Vector(0,0)],r=[0,0],i=[0,0],s=[0,0],c=0,l=[0,0],u=[0,0],f=[t.objects[this.contact.object1Index],t.objects[this.contact.object2Index]],h=!0,v=!1,p=void 0;try{for(var d,y=f.entries()[Symbol.iterator]();!(h=(d=y.next()).done);h=!0){var b=o(d.value,2),m=b[0],w=b[1];l[m]=w.inverseMass(),u[m]=this.relativeContactPosition[m].cross(this.contact.data.contactNormal)/w.momentOfInertia(),c+=l[m]+u[m]}}catch(t){v=!0,p=t}finally{try{!h&&y.return&&y.return()}finally{if(v)throw p}}var g=!0,j=!1,P=void 0;try{for(var x,k=f.entries()[Symbol.iterator]();!(g=(x=k.next()).done);g=!0){var O=o(x.value,2),m=O[0],w=O[1],_=0==m?1:-1;s[m]=_*e*(u[m]/c),i[m]=_*e*(l[m]/c);var S=this.relativeContactPosition[m].copy();S.add(this.contact.data.contactNormal.scale(-this.relativeContactPosition[m].dot(this.contact.data.contactNormal)));var T=t.AngularLimit*S.magnitude();if(s[m]<-T){var C=s[m]+i[m];s[m]=-T,i[m]=C-s[m]}else if(s[m]>T){var M=s[m]+i[m];s[m]=T,i[m]=M-s[m]}r[m]=Math.atan(s[m]/this.relativeContactPosition[m].magnitude()),n[m]=this.contact.data.contactNormal.scale(i[m]),w.position.add(n[m]),w.setRotation(w.rotation+r[m])}}catch(t){j=!0,P=t}finally{try{!g&&k.return&&k.return()}finally{if(j)throw P}}return{linearChanges:n,angularChanges:r}}},{key:"applyVelocityChange",value:function(t){var e=[new a.Vector(0,0),new a.Vector(0,0)],n=[0,0],r=this.calculateFrictionImpulse(t),i=this.contactToWorld.transform(r),s=!0,c=!1,l=void 0;try{for(var u,f=[this.contact.object1Index,this.contact.object2Index].entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=o(u.value,2),v=h[0],p=h[1],d=t.objects[p],y=void 0;y=0==v?this.relativeContactPosition[v].cross(i):i.cross(this.relativeContactPosition[v]),n[v]=y/d.momentOfInertia();var b=i.scale(d.inverseMass());1==v&&b.reverse(),e[v].add(b),d.velocity.add(e[v]),d.angularVelocity+=n[v]}}catch(t){c=!0,l=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}return{velocityChanges:e,angularVelocityChanges:n}}},{key:"calculateFrictionlessImpulse",value:function(t){var e=0,n=!0,r=!1,i=void 0;try{for(var s,c=[this.contact.object1Index,this.contact.object2Index].entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=o(s.value,2),u=l[0],f=l[1],h=t.objects[f],v=this.relativeContactPosition[u].cross(this.contact.data.contactNormal),p=v/h.momentOfInertia();e+=new a.Vector(-this.relativeContactPosition[u].b,this.relativeContactPosition[u].a).scale(p).dot(this.contact.data.contactNormal),e+=h.inverseMass()}}catch(t){r=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}return new a.Vector(this.desiredDeltaVelocity/e,0)}},{key:"calculateFrictionImpulse",value:function(t){var e=this,n=[],r=!0,i=!1,s=void 0;try{for(var c,l=[this.contact.object1Index,this.contact.object2Index].entries()[Symbol.iterator]();!(r=(c=l.next()).done);r=!0)!function(){var r=o(c.value,2),i=r[0],s=r[1],l=t.objects[s];n.push(function(t){var e=this.contactToWorld.transform(t),n=this.relativeContactPosition[i].cross(e),r=n/l.momentOfInertia(),o=new a.Vector(-this.relativeContactPosition[i].b,this.relativeContactPosition[i].a).scale(r);return o.add(e.scale(l.inverseMass())),o=this.contactToWorld.transformTranspose(o)}.bind(e))}()}catch(t){i=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}var u=new a.Vector(this.desiredDeltaVelocity,-this.contactVelocity.b),f=u.copy();f.normalize();var h=new a.Vector(0,0),v=!0,p=!1,d=void 0;try{for(var y,b=n[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var m=y.value;h.add(m(f))}}catch(t){p=!0,d=t}finally{try{!v&&b.return&&b.return()}finally{if(p)throw d}}var w=this.desiredDeltaVelocity/h.a,g=h.copy();g.normalize(),g.scaleInPlace(w);var j=Math.abs(g.b);return j>g.a*this.friction&&(g.b/=j,g.a=h.a+h.b*this.friction*g.b,g.a=this.desiredDeltaVelocity/g.a,g.b*=this.friction*g.a),g}}]),t}(),l=function(){function t(e){r(this,t),this.maxPositionIterations=100,this.maxVelocityIterations=1e3,this.velocityEpsilon=.001,this.world=e}return i(t,[{key:"resolve",value:function(t,e){if(0!=t.length){var n=this.prepareContacts(t,e);this.adjustPositions(n),this.adjustVelocities(n,e)}}},{key:"prepareContacts",value:function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(new c(l,this.world,e))}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}},{key:"adjustPositions",value:function(t){for(var e=0;e++<this.maxPositionIterations;){var n=0,r=0,i=!0,a=!1,c=void 0;try{for(var l,u=t.entries()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=o(l.value,2),h=f[0],v=f[1];v.contact.data.penetration>n&&(n=v.contact.data.penetration,r=h)}}catch(t){a=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}if(n<this.world.Tolerance)break;var p=t[r].applyPositionChange(this.world,n),d=!0,y=!1,b=void 0;try{for(var m,w=t[Symbol.iterator]();!(d=(m=w.next()).done);d=!0)for(var v=m.value,g=[0,1],j=0;j<g.length;j++){var P=g[j],x=v.contact.object1Index;1==P&&(x=v.contact.object2Index);for(var k=[0,1],O=0;O<k.length;O++){var _=k[O],S=t[r].contact.object1Index;if(1==_&&(S=t[r].contact.object2Index),x==S){var T=p.linearChanges[_].copy();T.add(s.Matrix.fromRotation(p.angularChanges[_]).transform(v.relativeContactPosition[P])),T.sub(v.relativeContactPosition[P]);var C=1==P?1:-1;v.contact.data.penetration+=C*T.dot(v.contact.data.contactNormal)}}}}catch(t){y=!0,b=t}finally{try{!d&&w.return&&w.return()}finally{if(y)throw b}}}if(e>=this.maxPositionIterations)throw Error("Hit position iteration limit")}},{key:"adjustVelocities",value:function(t,e){for(var n=0;n++<this.maxVelocityIterations;){var r=-1,i=this.velocityEpsilon,s=!0,c=!1,l=void 0;try{for(var u,f=t.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=o(u.value,2),v=h[0],p=h[1];p.desiredDeltaVelocity>i&&(i=p.desiredDeltaVelocity,r=v)}}catch(t){c=!0,l=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}if(-1==r)break;var d=t[r].applyVelocityChange(this.world),y=!0,b=!1,m=void 0;try{for(var w,g=t[Symbol.iterator]();!(y=(w=g.next()).done);y=!0)for(var p=w.value,j=[0,1],P=0;P<j.length;P++){var x=j[P],k=p.contact.object1Index;1==x&&(k=p.contact.object2Index);for(var O=[0,1],_=0;_<O.length;_++){var S=O[_],T=t[r].contact.object1Index;if(1==S&&(T=t[r].contact.object2Index),k==T){var C=d.velocityChanges[S].copy();C.add(new a.Vector(-p.relativeContactPosition[x].b,p.relativeContactPosition[x].a).scale(d.angularVelocityChanges[S]));var M=p.contactToWorld.transformTranspose(C);1==x&&M.reverse(),p.contactVelocity.add(M),p.desiredDeltaVelocity=p.calculateDesiredDeltaVelocity(this.world,e)}}}}catch(t){b=!0,m=t}finally{try{!y&&g.return&&g.return()}finally{if(b)throw m}}}if(n>=this.maxVelocityIterations)throw Error("Hit velocity iteration limit")}}]),t}();e.ContactResolver=l},function(t,e,n){"use strict";function r(t,e){var n=t.position.copy();n.sub(e.position);var r=n.magnitude();if(0==r||r>=t.radius+e.radius)return[];var o=n.scale(1/r),i=t.position.copy();return i.add(n.scale(.5)),[{contactNormal:o,contactPoint:i,penetration:t.radius+e.radius-r}]}Object.defineProperty(e,"__esModule",{value:!0}),e.discToDiscContact=r},function(t,e,n){"use strict";function r(t,e){var n=t.normal.dot(e.position)-e.radius-t.offset;if(n>=0)return[];var r=e.position.copy();r.sub(t.normal.scale(n+e.radius));var o=t.normal.copy();return o.reverse(),[{contactNormal:o,contactPoint:r,penetration:-n}]}function o(t,e){var n=[e.translateLocalPoint(new i.Vector(-e.halfX,e.halfY)),e.translateLocalPoint(new i.Vector(e.halfX,e.halfY)),e.translateLocalPoint(new i.Vector(-e.halfX,-e.halfY)),e.translateLocalPoint(new i.Vector(e.halfX,-e.halfY))],r=[],o=!0,a=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,f=t.normal.copy();f.reverse();var h=t.normal.dot(u)-t.offset;if(!(h>=0)){var v=t.normal.copy();v.scaleInPlace(-h/2),v.add(u),r.push({contactNormal:f,contactPoint:v,penetration:-h})}}}catch(t){a=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return r}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.planeToDiscContact=r,e.planeToBoxContact=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n){r(this,t),this.torque=e,this.governor=n}return o(t,[{key:"apply",value:function(t){Math.abs(t.angularVelocity)>this.governor||(t.torqueAccumulator+=this.torque)}}]),t}();e.TorqueGenerator=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(17),s=n(18),c=n(7),l=function(){function t(e,n){r(this,t),this.Gravity=20,this.Restitution=.6,this.Tolerance=.005,this.VelocityLimit=.25,this.AngularLimit=.2,this.height=100,this.width=0,this.gravityDirection=new i.Vector(0,-1),this.objects=[],this.springs=[],this.assemblies=[],this.height=e,this.width=n,this.reset()}return o(t,[{key:"reset",value:function(){this.contactGenerator=new a.ContactGenerator(this),this.contactResolver=new s.ContactResolver(this),this.objects=[],this.springs=[],this.assemblies=[],this.objectIDToAssembly={},this.addWalls()}},{key:"addWalls",value:function(){this.objects.push(new c.Plane(new i.Vector(this.width/2,0),new i.Vector(0,1),this.width/2)),this.objects.push(new c.Plane(new i.Vector(this.width,this.height/2),new i.Vector(-1,0),this.height/2)),this.objects.push(new c.Plane(new i.Vector(0,this.height/2),new i.Vector(1,0),this.height/2)),this.objects.push(new c.Plane(new i.Vector(this.width/2,this.height),new i.Vector(0,-1),this.width/2))}},{key:"addAssembly",value:function(t){this.assemblies.push(t);var e=!0,n=!1,r=void 0;try{for(var o,i=t.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.objectIDToAssembly[a.id]=t,this.objects.push(a)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}var s=!0,c=!1,l=void 0;try{for(var u,f=t.springs[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=u.value;this.springs.push(h)}}catch(t){c=!0,l=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}}},{key:"moveObjects",value:function(t){var e=t/1e3,n=this.gravityDirection.scale(this.Gravity),r=!0,o=!1,i=void 0;try{for(var a,s=this.objects[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){a.value.clearForFrame()}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}var c=!0,l=!1,u=void 0;try{for(var f,h=this.springs[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){f.value.accumulateForces()}}catch(t){l=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(l)throw u}}var v=!0,p=!1,d=void 0;try{for(var y,b=this.objects[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var m=y.value;m.mass!=1/0&&m.accumulateForce(n.scale(m.mass),m.position),m.setAcceleration(),m.updateVelocity(e),m.setAngularAcceleration(),m.updateAngularVelocity(e),m.applyDrag(e),m.updatePosition(e),m.updateRotation(e)}}catch(t){p=!0,d=t}finally{try{!v&&b.return&&b.return()}finally{if(p)throw d}}var w=this.contactGenerator.detectContacts();this.contactResolver.resolve(w,e)}},{key:"objectUnderPoint",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=this.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.isInside(t))return[a.translateRealWorldPoint(t),a]}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return[null,null]}},{key:"removeObject",value:function(t){this.springs=this.springs.filter(function(e){return e.o1.id!=t.id&&e.o2.id!=t.id}),this.objects=this.objects.filter(function(e){return e.id!=t.id}),delete this.objectIDToAssembly[t.id]}},{key:"stats",value:function(){var t=["fps: TODO"],e=!0,n=!1,r=void 0;try{for(var o,i=this.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;a instanceof c.Plane||t.push("p: ("+a.position.a.toFixed(2)+", "+a.position.b.toFixed(2)+") theta: "+a.rotation.toFixed(3))}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}}]),t}();e.World=l},function(t,e,n){e=t.exports=n(24)(void 0),e.push([t.i,"*{font-family:Open Sans,lucida grande,Segoe UI,arial,verdana,lucida sans unicode,tahoma,sans-serif!important;letter-spacing:.3px;color:#47525d;font-weight:100}body{background:#f6f9fc;margin:0}.bot-containers{display:flex;justify-content:space-between;height:300px}.bot-containers .bot-container{display:flex;flex-direction:column;width:50%}.bot-containers .bot-container textarea{flex-grow:1}",""])},function(t,e){function n(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=r(o);return[n].concat(o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"})).concat([i]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],e))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(u(r.parts[i],e));p[r.id]={id:r.id,refs:1,parts:a}}}}function o(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s=i[1],c=i[2],l=i[3],u={css:s,media:c,sourceMap:l};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function i(t,e){var n=y(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=w[w.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",l(e,t.attrs),i(t,e),e}function c(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",l(e,t.attrs),i(t,e),e}function l(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var l=m++;n=b||(b=s(e)),r=f.bind(null,n,l,!1),o=f.bind(null,n,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=c(e),r=v.bind(null,n,e),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=h.bind(null,n),o=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}function f(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=j(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function h(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function v(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=g(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var p={},d=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),y=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),b=null,m=0,w=[],g=n(26);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=d()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=o(t,e);return r(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var s=n[a],c=p[s.id];c.refs--,i.push(c)}if(t){r(o(t,e),e)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete p[c.id]}}}};var j=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return t;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(t,e){t.exports=ReactRouter},function(t,e){t.exports=ReactRouterDOM}]);