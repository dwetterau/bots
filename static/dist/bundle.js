!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/static/dist/",e(e.s=13)}([function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,r){n(this,t),this.a=0,this.b=0,this.a=e,this.b=r}return o(t,[{key:"copy",value:function(){return new t(this.a,this.b)}},{key:"add",value:function(t){this.a+=t.a,this.b+=t.b}},{key:"sub",value:function(t){this.a-=t.a,this.b-=t.b}},{key:"dot",value:function(t){return this.a*t.a+this.b*t.b}},{key:"cross",value:function(t){return this.a*t.b-this.b*t.a}},{key:"proj",value:function(e){var r=this.dot(e);return new t(e.a*r,e.b*r)}},{key:"squareMagnitude",value:function(){return this.a*this.a+this.b*this.b}},{key:"magnitude",value:function(){return Math.sqrt(this.squareMagnitude())}},{key:"normalize",value:function(){var t=this.magnitude();if(0==t)throw Error("Divide by zero error while normalizing vector");this.a/=t,this.b/=t}},{key:"reverse",value:function(){this.a=-this.a,this.b=-this.b}},{key:"scaleInPlace",value:function(t){this.a*=t,this.b*=t}},{key:"scale",value:function(e){return new t(this.a*e,this.b*e)}}]),t}();e.Vector=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){for(var t="0123456789ABCDEF".split(""),e="#",r=0;r<6;r++)e+=t[Math.round(15*Math.random())];return e}function i(){var t="",e=void 0;for(e=0;e<32;e+=1)switch(e){case 8:case 20:t+="-",t+=(16*Math.random()|0).toString(16);break;case 12:t+="-",t+="4";break;case 16:t+="-",t+=(4*Math.random()|8).toString(16);break;default:t+=(16*Math.random()|0).toString(16)}return t}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(0),c=function(){function t(e,r){n(this,t),this.linearDamping=.99,this.angularDamping=.8,this.id=i(),this.position=e,this.velocity=new s.Vector(0,0),this.acceleration=new s.Vector(0,0),this.mass=r,this.rotation=0,this.angularVelocity=0,this.color=o()}return a(t,[{key:"clearForFrame",value:function(){this.forceAccumulator=new s.Vector(0,0),this.torqueAccumulator=0}},{key:"accumulateForce",value:function(t,e){this.forceAccumulator.add(t);var r=new s.Vector(e.a-this.position.a,e.b-this.position.b);this.torqueAccumulator+=r.cross(t)}},{key:"updatePosition",value:function(t){this.position.add(this.velocity.scale(t))}},{key:"updateVelocity",value:function(t){this.velocity.add(this.acceleration.scale(t))}},{key:"setAcceleration",value:function(){this.lastFrameAcceleration=this.acceleration.copy(),this.lastFrameAcceleration.add(this.forceAccumulator.scale(this.inverseMass())),this.acceleration=this.forceAccumulator.scale(this.inverseMass())}},{key:"setAngularAcceleration",value:function(){this.torqueGenerator&&this.torqueGenerator.apply(this),this.angularAcceleration=this.torqueAccumulator/this.momentOfInertia()}},{key:"updateAngularVelocity",value:function(t){this.angularVelocity+=this.angularAcceleration*t}},{key:"updateRotation",value:function(t){this.setRotation(this.rotation+this.angularVelocity*t)}},{key:"setRotation",value:function(t){this.rotation=t,this.rotation<0?this.rotation+=2*Math.PI:this.rotation>2*Math.PI&&(this.rotation-=2*Math.PI)}},{key:"applyDrag",value:function(t){this.velocity.scaleInPlace(Math.pow(this.linearDamping,t)),this.angularVelocity*=Math.pow(this.angularDamping,t)}},{key:"velocityAtPoint",value:function(t){var e=this.velocity.copy(),r=new s.Vector(-t.b,t.a);return r.normalize(),r.scaleInPlace(this.angularVelocity*t.magnitude()),e.add(r),e}},{key:"inverseMass",value:function(){return 1/this.mass}},{key:"drawSelf",value:function(t,e){throw Error("Abstract method, subclasses must implement.")}},{key:"momentOfInertia",value:function(){throw Error("Abstract method, subclasses must implement.")}},{key:"translateRealWorldPoint",value:function(t){throw Error("Abstract method, subclasses must implement.")}},{key:"translateLocalPoint",value:function(t){throw Error("Abstract method, subclasses must implement.")}},{key:"isInside",value:function(t){throw Error("Abstract method, subclasses must implement.")}}]),t}();e.WorldObject=c},function(t,e){t.exports=React},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=function(){function t(e,r,o,i){n(this,t),this.aa=e,this.ab=r,this.ba=o,this.bb=i}return o(t,[{key:"transform",value:function(t){return new i.Vector(this.aa*t.a+this.ab*t.b,this.ba*t.a+this.bb*t.b)}},{key:"transformTranspose",value:function(t){return new i.Vector(this.aa*t.a+this.ba*t.b,this.ab*t.a+this.bb*t.b)}}],[{key:"fromRotation",value:function(e){return new t(Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e))}}]),t}();e.Matrix=a},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),c=r(0),l=r(3),u=function(t){function e(t,r,i,a){n(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return s.halfX=0,s.halfY=0,s.halfX=i,s.halfY=a,s}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return this.mass*(4*this.halfX*this.halfX+4*this.halfY*this.halfY)/12}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var r=e.getX(this.position.a),n=e.getY(this.position.b);t.translate(r,n);var o=2*Math.PI-this.rotation;t.rotate(o),t.rect(-this.halfX*e.canvasToGridRatio,-this.halfY*e.canvasToGridRatio,2*this.halfX*e.canvasToGridRatio,2*this.halfY*e.canvasToGridRatio),t.fill(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath(),t.rotate(-o),t.translate(-r,-n)}},{key:"getAxis",value:function(t){var e=l.Matrix.fromRotation(this.rotation).transform(new c.Vector(1-t,t));return e.normalize(),e}},{key:"translateRealWorldPoint",value:function(t){return l.Matrix.fromRotation(this.rotation).transformTranspose(new c.Vector(t.a-this.position.a,t.b-this.position.b))}},{key:"translateLocalPoint",value:function(t){var e=t.copy();return e=l.Matrix.fromRotation(this.rotation).transform(e),e.add(this.position),e}},{key:"transformToAxis",value:function(t){return this.halfX*Math.abs(t.dot(this.getAxis(0)))+this.halfY*Math.abs(t.dot(this.getAxis(1)))}},{key:"isInside",value:function(t){var e=this.translateRealWorldPoint(t);return Math.abs(e.a)<=this.halfX&&Math.abs(e.b)<=this.halfY}}]),e}(s.WorldObject);e.Box=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),c=r(0),l=r(3),u=function(t){function e(t,r,i){n(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return a.radius=0,a.radius=i,a}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return this.mass*(this.radius*this.radius)/2}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var r=e.getX(this.position.a),n=e.getY(this.position.b);t.translate(r,n);var o=2*Math.PI-this.rotation;t.rotate(o);var i=Math.round(this.radius*e.canvasToGridRatio);t.arc(0,0,i,0,2*Math.PI,!1),t.fill(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath(),t.moveTo(-i/2,0),t.lineTo(i/2,0),t.stroke(),t.closePath(),t.moveTo(0,-i/2),t.lineTo(0,i/2),t.stroke(),t.closePath(),t.rotate(-o),t.translate(-r,-n)}},{key:"translateRealWorldPoint",value:function(t){return l.Matrix.fromRotation(this.rotation).transformTranspose(new c.Vector(t.a-this.position.a,t.b-this.position.b))}},{key:"translateLocalPoint",value:function(t){var e=t.copy();return e=l.Matrix.fromRotation(this.rotation).transform(e),e.add(this.position),e}},{key:"isInside",value:function(t){return this.translateRealWorldPoint(t).magnitude()<=this.radius}}]),e}(s.WorldObject);e.Disc=u},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),c=r(0),l=function(t){function e(t){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,1/0))}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return 1/0}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var r=e.getX(this.position.a),n=e.getY(this.position.b);t.translate(r,n),t.lineWidth=2;t.strokeStyle="#000",t.moveTo(-4,-4),t.lineTo(4,4),t.stroke(),t.closePath(),t.moveTo(-4,4),t.lineTo(4,-4),t.stroke(),t.closePath(),t.translate(-r,-n)}},{key:"translateRealWorldPoint",value:function(t){return new c.Vector(t.a-this.position.a,t.b-this.position.b)}},{key:"translateLocalPoint",value:function(t){return new c.Vector(this.position.a+t.a,this.position.b+t.b)}},{key:"isInside",value:function(t){return!1}}]),e}(s.WorldObject);e.Particle=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(1),c=r(0),l=function(t){function e(t,r,i){n(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,1/0));return a.normal=r,a.offset=r.dot(t),a.squareRadius=i,a}return i(e,t),a(e,[{key:"momentOfInertia",value:function(){return 1/0}},{key:"drawSelf",value:function(t,e){t.beginPath(),t.fillStyle=this.color;var r=new c.Vector(-this.normal.b,this.normal.a);r.scaleInPlace(this.squareRadius),t.moveTo(e.getX(this.position.a+r.a),e.getY(this.position.b+r.b)),r.reverse(),t.lineTo(e.getX(this.position.a+r.a),e.getY(this.position.b+r.b)),t.lineWidth=2,t.stroke(),t.closePath()}},{key:"translateRealWorldPoint",value:function(t){return new c.Vector(t.a-this.position.a,t.b-this.position.b)}},{key:"translateLocalPoint",value:function(t){return new c.Vector(this.position.a+t.a,this.position.b+t.b)}},{key:"isInside",value:function(t){return!1}}]),e}(s.WorldObject);e.Plane=l},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(2),c=r(28),l=r(29),u=r(11),h=function(t){function e(t){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return i(e,t),a(e,[{key:"render",value:function(){var t=this,e=function(){return s.createElement("div",null,t.props.message,s.createElement(u.GameCanvas,null))};return s.createElement("div",null,s.createElement(l.BrowserRouter,null,s.createElement("div",null,s.createElement(c.Route,{path:"/",component:e}))))}}]),e}(s.Component);e.App=h},function(t,e,r){var n=r(24);"string"==typeof n&&(n=[[t.i,n,""]]);var o={};o.transform=void 0;r(26)(n,o);n.locals&&(t.exports=n.locals)},function(t,e){t.exports=ReactDOM},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var c=r(2),l=r(23),u=r(0),h=r(21),f=r(22),d=r(6),v=r(12),y={bodySpec:{width:20,height:8,mass:20},wheelSpec:{radius:3,mass:5,offsetX:5,offsetY:-4}},p=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.ctx=null,t.intervalID=null,t.DRAW_INTERVAL=10,t.simulation=null,t.width=0,t.height=0,t.canvasToGridRatio=0,t.specText=[JSON.stringify(y,null,4),JSON.stringify(y,null,4)],t.initialOffsetX=15,t.initialOffsetY=5,t.wheelTorque=500,t.wheelGovernor=6,t.dragging=!1,t.timingTotals={physicsTime:0,drawTime:0,waitTime:0,lastTime:0,frames:0},t}return i(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.game_canvas;this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,e.style.width=this.width+"px",e.style.height=this.height+"px";var r=Math.round(100*e.width/e.height);this.canvasToGridRatio=this.height/100,this.intervalID=setInterval(this.draw.bind(this),this.DRAW_INTERVAL),this.simulation=new l.World(100,r),this.renderingInfo={canvasToGridRatio:this.canvasToGridRatio,height:this.height,getX:function(e){return e*t.canvasToGridRatio},getY:function(e){return t.height-e*t.canvasToGridRatio}},this.resetGame(),document.addEventListener("keydown",this.onKeyPress.bind(this)),e.addEventListener("mousedown",this.onMouseDown.bind(this,e)),e.addEventListener("mousemove",this.onMouseMove.bind(this,e)),e.addEventListener("mouseup",this.onMouseUp.bind(this,e))}},{key:"resetGame",value:function(){var t=this.parseSpecs();this.bots=[],this.wheelMotors=[new f.TorqueGenerator(-this.wheelTorque,this.wheelGovernor),new f.TorqueGenerator(this.wheelTorque,this.wheelGovernor)],this.simulation.reset();var e=!0,r=!1,n=void 0;try{for(var o,i=t.entries()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=a(o.value,2),c=s[0],l=s[1],h=1==c?this.simulation.width-this.initialOffsetX:this.initialOffsetX,d=this.initialOffsetY+l.bodySpec.height/2+l.wheelSpec.radius;this.bots.push(new v.Bot(new u.Vector(h,d),l)),this.bots[c].addWheelMotor(this.wheelMotors[c]),this.simulation.addAssembly(this.bots[c])}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"parseSpecs",value:function(){for(var t=[],e=[0,1],r=0;r<e.length;r++){var n=e[r],o=this.refs["bot"+(n+1)+"_spec"].value;t.push(JSON.parse(o))}return t}},{key:"onSpecChange",value:function(t,e){this.specText[t]=e.target.value}},{key:"onResetPush",value:function(){this.resetGame()}},{key:"onKeyPress",value:function(t){65==t.which&&(this.wheelMotors[0].torque=Math.abs(this.wheelMotors[0].torque)),68==t.which&&(this.wheelMotors[0].torque=-Math.abs(this.wheelMotors[0].torque)),37==t.which&&(this.wheelMotors[1].torque=Math.abs(this.wheelMotors[1].torque)),39==t.which&&(this.wheelMotors[1].torque=-Math.abs(this.wheelMotors[1].torque))}},{key:"onMouseDown",value:function(t,e){if(!this.dragging){var r=this.getGridVector(t,e),n=this.simulation.objectUnderPoint(r),o=a(n,2),i=o[0],s=o[1];null!=s&&(this.mouseParticle=new d.Particle(r),this.simulation.addObject(this.mouseParticle),this.draggingSpring=new h.Spring(100,5,this.mouseParticle,new u.Vector(0,0),s,i),this.simulation.springs.push(this.draggingSpring),this.dragging=!0)}}},{key:"onMouseMove",value:function(t,e){this.dragging&&(this.mouseParticle.position=this.getGridVector(t,e))}},{key:"onMouseUp",value:function(t,e){this.dragging&&(this.dragging=!1,this.simulation.removeObject(this.mouseParticle))}},{key:"getGridVector",value:function(t,e){var r=e.x-t.offsetLeft,n=this.height-(e.y-t.offsetTop),o=r/this.canvasToGridRatio,i=n/this.canvasToGridRatio;return new u.Vector(o,i)}},{key:"componentWillUnmount",value:function(){this.intervalID&&clearInterval(this.intervalID)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"draw",value:function(){var t={startTime:(new Date).getTime(),clearTime:0,physicsTime:0,drawTime:0};this.clear(),t.clearTime=(new Date).getTime(),this.simulation.moveObjects(this.DRAW_INTERVAL),t.physicsTime=(new Date).getTime();var e=!0,r=!1,n=void 0;try{for(var o,i=this.simulation.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){o.value.drawSelf(this.ctx,this.renderingInfo)}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}var a=!0,s=!1,c=void 0;try{for(var l,u=this.simulation.springs[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){l.value.drawSelf(this.ctx,this.renderingInfo)}}catch(t){s=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}t.drawTime=(new Date).getTime();var h=t.physicsTime-t.clearTime,f=t.drawTime-t.physicsTime;f+=t.clearTime-t.startTime,0!=this.timingTotals.lastTime&&(this.timingTotals.waitTime+=t.startTime-this.timingTotals.lastTime),this.timingTotals.physicsTime+=h,this.timingTotals.drawTime+=f,this.ctx.fillStyle="#000000";var d=10,v=this.timingTotals.physicsTime+this.timingTotals.drawTime+this.timingTotals.waitTime,y=Math.round(this.timingTotals.physicsTime/v*100),p=Math.round(this.timingTotals.drawTime/v*100),b=Math.round(this.timingTotals.waitTime/v*100),m=Math.round(1e3*this.timingTotals.frames/v);this.ctx.fillText("fps: "+m+" phys:"+y+"% draw:"+p+"% wait:"+b+"%",10,d),d+=10;var w=!0,g=!1,j=void 0;try{for(var P,T=this.simulation.stats()[Symbol.iterator]();!(w=(P=T.next()).done);w=!0){var O=P.value;this.ctx.fillText(O,10,d),d+=10}}catch(t){g=!0,j=t}finally{try{!w&&T.return&&T.return()}finally{if(g)throw j}}this.timingTotals.lastTime=(new Date).getTime(),this.timingTotals.frames+=1}},{key:"render",value:function(){return c.createElement("div",null,c.createElement("canvas",{ref:"game_canvas",width:"800",height:"584"}),c.createElement("div",{className:"bot-containers"},c.createElement("div",{className:"bot-container"},"Bot 1 spec",c.createElement("textarea",{ref:"bot1_spec",onChange:this.onSpecChange.bind(this,0),defaultValue:this.specText[0]})),c.createElement("div",{className:"bot-container"},"Bot 2 spec",c.createElement("textarea",{ref:"bot2_spec",onChange:this.onSpecChange.bind(this,1),defaultValue:this.specText[1]}))),c.createElement("input",{type:"button",onClick:this.onResetPush.bind(this),value:"Reset"}))}}]),e}(c.Component);e.GameCanvas=p},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)};Object.defineProperty(e,"__esModule",{value:!0});var c=r(14),l=r(0),u=r(4),h=r(5),f=r(19),d=.01,v=function(t){function e(t,r){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setObjects",i).call(i,[new u.Box(t,r.bodySpec.mass,r.bodySpec.width/2,r.bodySpec.height/2),new h.Disc(new l.Vector(t.a-r.wheelSpec.offsetX,t.b+r.wheelSpec.offsetY),r.wheelSpec.mass,r.wheelSpec.radius),new h.Disc(new l.Vector(t.a+r.wheelSpec.offsetX,t.b+r.wheelSpec.offsetY),r.wheelSpec.mass,r.wheelSpec.radius)]);for(var a=[],c=[0,1],v=0;v<c.length;v++){var y=c[v],p=0==y?-1:1;a.push(new f.Joint(d,i.objects[0],new l.Vector(p*r.wheelSpec.offsetX,r.wheelSpec.offsetY),i.objects[y+1],new l.Vector(0,0)))}return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setJoints",i).call(i,a),i}return i(e,t),a(e,[{key:"addWheelMotor",value:function(t){this.objects[1].torqueGenerator=t,this.objects[2].torqueGenerator=t}}]),e}(c.Assembly);e.Bot=v},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getCookie(t){var e="";if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var o=jQuery.trim(r[n]);if(o.substring(0,t.length+1)==t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}return e}function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(9);var React=__webpack_require__(2),ReactDOM=__webpack_require__(10),app_1=__webpack_require__(8),AppRenderer=function t(e){_classCallCheck(this,t),ReactDOM.render(React.createElement(app_1.App,Object.assign({},e)),document.getElementById("render-target"))};exports.default=AppRenderer;var csrfToken=getCookie("csrftoken");jQuery.ajaxSetup({beforeSend:function(t,e){csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",csrfToken)}}),eval("window.AppRenderer = AppRenderer;")},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){n(this,t),this.objects=[],this.objectIDs={},this.joints=[],this.springs=[]}return o(t,[{key:"setObjects",value:function(t){this.objectIDs={},this.objects=t;var e=!0,r=!1,n=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.objectIDs[a.id]=!0}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"setJoints",value:function(t){this.joints=t}},{key:"setSprings",value:function(t){this.springs=t}},{key:"contains",value:function(t){return this.objectIDs[t.id]&&this.objectIDs[t.id]}}]),t}();e.Assembly=i},function(t,e,r){"use strict";function n(t,e){var r=t.translateRealWorldPoint(e.position),n=new s.Vector(0,0),o=r.a;o>t.halfX?o=t.halfX:o<-t.halfX&&(o=-t.halfX),n.a=o,o=r.b,o>t.halfY?o=t.halfY:o<-t.halfY&&(o=-t.halfY),n.b=o;var i=n.copy();if(i.sub(r),(o=i.squareMagnitude())>e.radius*e.radius)return[];var a=t.translateLocalPoint(n);return i=a.copy(),i.sub(e.position),i.normalize(),[{contactNormal:i,contactPoint:a,penetration:e.radius-Math.sqrt(o)}]}function o(t,e,r,n){return t.transformToAxis(r)+e.transformToAxis(r)-Math.abs(r.dot(n))}function i(t,e){var r=e.position.copy();r.sub(t.position);var n=[t.getAxis(0),t.getAxis(1),e.getAxis(0),e.getAxis(1)],i=1/0,c=-1,l=!0,u=!1,h=void 0;try{for(var f,d=n.entries()[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var v=a(f.value,2),y=v[0],p=v[1],b=o(t,e,p,r);if(b<0)return[];b<i&&(i=b,c=y)}}catch(t){u=!0,h=t}finally{try{!l&&d.return&&d.return()}finally{if(u)throw h}}var m=function(t,e){var r=n[c].copy();r.dot(e)>0&&r.reverse();var o=new s.Vector(t.halfX,t.halfY);return t.getAxis(0).dot(r)<0&&(o.a=-o.a),t.getAxis(1).dot(r)<0&&(o.b=-o.b),[r,t.translateLocalPoint(o)]},w=new s.Vector(0,0),g=new s.Vector(0,0);if(c<=1){var j=m(e,r),P=a(j,2);g=P[0],w=P[1]}else{r.reverse();var T=m(t,r),O=a(T,2);g=O[0],w=O[1],g.reverse()}return[{contactNormal:g,contactPoint:w,penetration:i}]}var a=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(e,"__esModule",{value:!0});var s=r(0);e.boxToDiscContact=n,e.boxToBoxContact=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(5),s=r(18),c=r(7),l=r(20),u=r(4),h=r(15),f=r(6),d=function(){function t(e){n(this,t),this.world=e}return i(t,[{key:"detectContacts",value:function(){for(var t=[],e=0;e<this.world.objects.length;e++)for(var r=this.world.objects[e],n=this.world.objectIDToAssembly[r.id],o=e+1;o<this.world.objects.length;o++){var i=this.world.objects[o];if(!n||!n.contains(i)){var a=!0,s=!1,c=void 0;try{for(var l,u=this.computeContactData(r,i)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var h=l.value;t.push({data:h,object1Id:r.id,object2Id:i.id})}}catch(t){s=!0,c=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}}}var f=!0,d=!1,v=void 0;try{for(var y,p=this.world.joints[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var b=y.value;b.exceedsThreshold()&&t.push({data:b.generateContact(),object1Id:b.o1.id,object2Id:b.o2.id})}}catch(t){d=!0,v=t}finally{try{!f&&p.return&&p.return()}finally{if(d)throw v}}return t}},{key:"flip",value:function(t){return function(e,r){var n=t(r,e);for(var o in n)n[o].contactNormal.reverse();return n}}},{key:"computeContactData",value:function(t,e){var r=[[a.Disc,a.Disc],[a.Disc,c.Plane],[a.Disc,u.Box],[a.Disc,f.Particle],[c.Plane,a.Disc],[c.Plane,c.Plane],[c.Plane,u.Box],[c.Plane,f.Particle],[u.Box,a.Disc],[u.Box,c.Plane],[u.Box,u.Box],[u.Box,f.Particle],[f.Particle,a.Disc],[f.Particle,c.Plane],[f.Particle,u.Box],[f.Particle,f.Particle]],n=function(t,e){return[]},i=[s.discToDiscContact,this.flip(l.planeToDiscContact),this.flip(h.boxToDiscContact),n,l.planeToDiscContact,n,l.planeToBoxContact,n,h.boxToDiscContact,this.flip(l.planeToBoxContact),h.boxToBoxContact,n,n,n,n,n],d=!0,v=!1,y=void 0;try{for(var p,b=r.entries()[Symbol.iterator]();!(d=(p=b.next()).done);d=!0){var m=o(p.value,2),w=m[0],g=o(m[1],2),j=g[0],P=g[1];if(t instanceof j&&e instanceof P)return i[w](t,e)}}catch(t){v=!0,y=t}finally{try{!d&&b.return&&b.return()}finally{if(v)throw y}}throw Error("Missing object type handling")}}]),t}();e.ContactGenerator=d},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(0),s=r(3),c=function(){function t(e,r,o){n(this,t),this.friction=.4,this.contact=e,this.contactToWorld=this.computeContactToWorld(e.data.contactNormal),this.relativeContactPosition=[this.contact.data.contactPoint.copy(),this.contact.data.contactPoint.copy()],this.relativeContactPosition[0].sub(r.idToObject[e.object1Id].position),this.relativeContactPosition[1].sub(r.idToObject[e.object2Id].position),this.contactVelocity=this.calculateLocalVelocity(0,r.idToObject[e.object1Id],o),this.contactVelocity.sub(this.calculateLocalVelocity(1,r.idToObject[e.object2Id],o)),this.desiredDeltaVelocity=this.calculateDesiredDeltaVelocity(r,o)}return i(t,[{key:"computeContactToWorld",value:function(t){return new s.Matrix(t.a,-t.b,t.b,t.a)}},{key:"calculateLocalVelocity",value:function(t,e,r){var n=e.velocityAtPoint(this.relativeContactPosition[t]),o=this.contactToWorld.transformTranspose(n),i=this.contactToWorld.transformTranspose(e.lastFrameAcceleration.scale(r));return i.a=0,o.add(i),o}},{key:"calculateDesiredDeltaVelocity",value:function(t,e){var r=t.idToObject[this.contact.object1Id],n=t.idToObject[this.contact.object2Id],o=r.lastFrameAcceleration.scale(e).dot(this.contact.data.contactNormal);o-=n.lastFrameAcceleration.scale(e).dot(this.contact.data.contactNormal);var i=t.Restitution;return Math.abs(this.contactVelocity.a)<t.VelocityLimit&&(i=0),-this.contactVelocity.a-i*(this.contactVelocity.a-o)}},{key:"applyPositionChange",value:function(t,e){var r=[new a.Vector(0,0),new a.Vector(0,0)],n=[0,0],i=[0,0],s=[0,0],c=0,l=[0,0],u=[0,0],h=[t.idToObject[this.contact.object1Id],t.idToObject[this.contact.object2Id]],f=!0,d=!1,v=void 0;try{for(var y,p=h.entries()[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var b=o(y.value,2),m=b[0],w=b[1];l[m]=w.inverseMass(),u[m]=this.relativeContactPosition[m].cross(this.contact.data.contactNormal)/w.momentOfInertia(),c+=l[m]+u[m]}}catch(t){d=!0,v=t}finally{try{!f&&p.return&&p.return()}finally{if(d)throw v}}var g=!0,j=!1,P=void 0;try{for(var T,O=h.entries()[Symbol.iterator]();!(g=(T=O.next()).done);g=!0){var k=o(T.value,2),m=k[0],w=k[1],x=0==m?1:-1;s[m]=x*e*(u[m]/c),i[m]=x*e*(l[m]/c);var _=this.relativeContactPosition[m].copy();_.add(this.contact.data.contactNormal.scale(-this.relativeContactPosition[m].dot(this.contact.data.contactNormal)));var M=t.AngularLimit*_.magnitude();if(s[m]<-M){var S=s[m]+i[m];s[m]=-M,i[m]=S-s[m]}else if(s[m]>M){var C=s[m]+i[m];s[m]=M,i[m]=C-s[m]}n[m]=Math.atan(s[m]/this.relativeContactPosition[m].magnitude()),r[m]=this.contact.data.contactNormal.scale(i[m]),w.position.add(r[m]),w.setRotation(w.rotation+n[m])}}catch(t){j=!0,P=t}finally{try{!g&&O.return&&O.return()}finally{if(j)throw P}}return{linearChanges:r,angularChanges:n}}},{key:"applyVelocityChange",value:function(t){var e=[new a.Vector(0,0),new a.Vector(0,0)],r=[0,0],n=this.calculateFrictionImpulse(t),i=this.contactToWorld.transform(n),s=!0,c=!1,l=void 0;try{for(var u,h=[this.contact.object1Id,this.contact.object2Id].entries()[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=o(u.value,2),d=f[0],v=f[1],y=t.idToObject[v],p=void 0;p=0==d?this.relativeContactPosition[d].cross(i):i.cross(this.relativeContactPosition[d]),r[d]=p/y.momentOfInertia();var b=i.scale(y.inverseMass());1==d&&b.reverse(),e[d].add(b),y.velocity.add(e[d]),y.angularVelocity+=r[d]}}catch(t){c=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}return{velocityChanges:e,angularVelocityChanges:r}}},{key:"calculateFrictionlessImpulse",value:function(t){var e=0,r=!0,n=!1,i=void 0;try{for(var s,c=[this.contact.object1Id,this.contact.object2Id].entries()[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=o(s.value,2),u=l[0],h=l[1],f=t.idToObject[h],d=this.relativeContactPosition[u].cross(this.contact.data.contactNormal),v=d/f.momentOfInertia();e+=new a.Vector(-this.relativeContactPosition[u].b,this.relativeContactPosition[u].a).scale(v).dot(this.contact.data.contactNormal),e+=f.inverseMass()}}catch(t){n=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(n)throw i}}return new a.Vector(this.desiredDeltaVelocity/e,0)}},{key:"calculateFrictionImpulse",value:function(t){var e=this,r=[],n=!0,i=!1,s=void 0;try{for(var c,l=[this.contact.object1Id,this.contact.object2Id].entries()[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)!function(){var n=o(c.value,2),i=n[0],s=n[1],l=t.idToObject[s];r.push(function(t){var e=this.contactToWorld.transform(t),r=this.relativeContactPosition[i].cross(e),n=r/l.momentOfInertia(),o=new a.Vector(-this.relativeContactPosition[i].b,this.relativeContactPosition[i].a).scale(n);return o.add(e.scale(l.inverseMass())),o=this.contactToWorld.transformTranspose(o)}.bind(e))}()}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}var u=new a.Vector(this.desiredDeltaVelocity,-this.contactVelocity.b),h=u.copy();h.normalize();var f=new a.Vector(0,0),d=!0,v=!1,y=void 0;try{for(var p,b=r[Symbol.iterator]();!(d=(p=b.next()).done);d=!0){var m=p.value;f.add(m(h))}}catch(t){v=!0,y=t}finally{try{!d&&b.return&&b.return()}finally{if(v)throw y}}var w=this.desiredDeltaVelocity/f.a,g=f.copy();g.normalize(),g.scaleInPlace(w);var j=Math.abs(g.b);return j>g.a*this.friction&&(g.b/=j,g.a=f.a+f.b*this.friction*g.b,g.a=this.desiredDeltaVelocity/g.a,g.b*=this.friction*g.a),g}}]),t}(),l=function(){function t(e){n(this,t),this.maxPositionIterations=1e4,this.maxVelocityIterations=1e4,this.velocityEpsilon=.001,this.world=e}return i(t,[{key:"resolve",value:function(t,e){if(0!=t.length){var r=this.prepareContacts(t,e);this.adjustPositions(r),this.adjustVelocities(r,e)}}},{key:"prepareContacts",value:function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.push(new c(l,this.world,e))}}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}},{key:"adjustPositions",value:function(t){for(var e=0;e++<this.maxPositionIterations;){var r=0,n=0,i=!0,a=!1,c=void 0;try{for(var l,u=t.entries()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=o(l.value,2),f=h[0],d=h[1];d.contact.data.penetration>r&&(r=d.contact.data.penetration,n=f)}}catch(t){a=!0,c=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw c}}if(r<this.world.Tolerance)break;var v=t[n].applyPositionChange(this.world,r),y=!0,p=!1,b=void 0;try{for(var m,w=t[Symbol.iterator]();!(y=(m=w.next()).done);y=!0)for(var d=m.value,g=[0,1],j=0;j<g.length;j++){var P=g[j],T=d.contact.object1Id;1==P&&(T=d.contact.object2Id);for(var O=[0,1],k=0;k<O.length;k++){var x=O[k],_=t[n].contact.object1Id;if(1==x&&(_=t[n].contact.object2Id),T==_){var M=v.linearChanges[x].copy();M.add(s.Matrix.fromRotation(v.angularChanges[x]).transform(d.relativeContactPosition[P])),M.sub(d.relativeContactPosition[P]);var S=1==P?1:-1;d.contact.data.penetration+=S*M.dot(d.contact.data.contactNormal)}}}}catch(t){p=!0,b=t}finally{try{!y&&w.return&&w.return()}finally{if(p)throw b}}}if(e>=this.maxPositionIterations)throw Error("Hit position iteration limit")}},{key:"adjustVelocities",value:function(t,e){for(var r=0;r++<this.maxVelocityIterations;){var n=-1,i=this.velocityEpsilon,s=!0,c=!1,l=void 0;try{for(var u,h=t.entries()[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=o(u.value,2),d=f[0],v=f[1];v.desiredDeltaVelocity>i&&(i=v.desiredDeltaVelocity,n=d)}}catch(t){c=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}if(-1==n)break;var y=t[n].applyVelocityChange(this.world),p=!0,b=!1,m=void 0;try{for(var w,g=t[Symbol.iterator]();!(p=(w=g.next()).done);p=!0)for(var v=w.value,j=[0,1],P=0;P<j.length;P++){var T=j[P],O=v.contact.object1Id;1==T&&(O=v.contact.object2Id);for(var k=[0,1],x=0;x<k.length;x++){var _=k[x],M=t[n].contact.object1Id;if(1==_&&(M=t[n].contact.object2Id),O==M){var S=y.velocityChanges[_].copy();S.add(new a.Vector(-v.relativeContactPosition[T].b,v.relativeContactPosition[T].a).scale(y.angularVelocityChanges[_]));var C=v.contactToWorld.transformTranspose(S);1==T&&C.reverse(),v.contactVelocity.add(C),v.desiredDeltaVelocity=v.calculateDesiredDeltaVelocity(this.world,e)}}}}catch(t){b=!0,m=t}finally{try{!p&&g.return&&g.return()}finally{if(b)throw m}}}if(r>=this.maxVelocityIterations)throw Error("Hit velocity iteration limit")}}]),t}();e.ContactResolver=l},function(t,e,r){"use strict";function n(t,e){var r=t.position.copy();r.sub(e.position);var n=r.magnitude();if(0==n||n>=t.radius+e.radius)return[];var o=r.scale(1/n),i=t.position.copy();return i.add(r.scale(.5)),[{contactNormal:o,contactPoint:i,penetration:t.radius+e.radius-n}]}Object.defineProperty(e,"__esModule",{value:!0}),e.discToDiscContact=n},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(e,r,o,i,a){n(this,t),this.threshold=e,this.o1=r,this.p1=o,this.o2=i,this.p2=a}return i(t,[{key:"displacementAndP1",value:function(){var t=this.o1.translateLocalPoint(this.p1),e=this.o2.translateLocalPoint(this.p2),r=e.copy();return r.sub(t),[r,t]}},{key:"displacement",value:function(){return this.displacementAndP1()[0]}},{key:"exceedsThreshold",value:function(){return this.displacement().squareMagnitude()>this.threshold*this.threshold}},{key:"generateContact",value:function(){var t=this.displacementAndP1(),e=o(t,2),r=e[0],n=e[1],i=r.magnitude();return r.scaleInPlace(1/i),{contactNormal:r,contactPoint:n,penetration:i}}}]),t}();e.Joint=a},function(t,e,r){"use strict";function n(t,e){var r=t.normal.dot(e.position)-e.radius-t.offset;if(r>=0)return[];var n=e.position.copy();n.sub(t.normal.scale(r+e.radius));var o=t.normal.copy();return o.reverse(),[{contactNormal:o,contactPoint:n,penetration:-r}]}function o(t,e){var r=[e.translateLocalPoint(new i.Vector(-e.halfX,e.halfY)),e.translateLocalPoint(new i.Vector(e.halfX,e.halfY)),e.translateLocalPoint(new i.Vector(-e.halfX,-e.halfY)),e.translateLocalPoint(new i.Vector(e.halfX,-e.halfY))],n=[],o=!0,a=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,h=t.normal.copy();h.reverse();var f=t.normal.dot(u)-t.offset;if(!(f>=0)){var d=t.normal.copy();d.scaleInPlace(-f/2),d.add(u),n.push({contactNormal:h,contactPoint:d,penetration:-f})}}}catch(t){a=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}return n}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0);e.planeToDiscContact=n,e.planeToBoxContact=o},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,r,o,i,a,s){n(this,t),this.k=e,this.l=r,this.o1=o,this.p1=i,this.o2=a,this.p2=s}return o(t,[{key:"accumulateForces",value:function(){var t=this.o1.translateLocalPoint(this.p1),e=this.o2.translateLocalPoint(this.p2),r=e.copy();r.sub(t);var n=r.magnitude()-this.l;n!=-this.l&&(r.normalize(),r.scaleInPlace(this.k*n),this.o1.accumulateForce(r,t),r.reverse(),this.o2.accumulateForce(r,e))}},{key:"drawSelf",value:function(t,e){t.beginPath();var r=this.o1.translateLocalPoint(this.p1),n=this.o2.translateLocalPoint(this.p2);t.moveTo(e.getX(r.a),e.getY(r.b)),t.lineTo(e.getX(n.a),e.getY(n.b)),t.stroke(),t.lineWidth=2,t.strokeStyle="#000",t.stroke(),t.closePath()}}]),t}();e.Spring=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,r){n(this,t),this.torque=e,this.governor=r}return o(t,[{key:"apply",value:function(t){Math.abs(t.angularVelocity)>this.governor||(t.torqueAccumulator+=this.torque)}}]),t}();e.TorqueGenerator=i},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(16),s=r(17),c=r(7),l=function(){function t(e,r){n(this,t),this.Gravity=20,this.Restitution=.6,this.Tolerance=.005,this.VelocityLimit=.25,this.AngularLimit=.2,this.height=100,this.width=0,this.gravityDirection=new i.Vector(0,-1),this.objects=[],this.joints=[],this.springs=[],this.assemblies=[],this.height=e,this.width=r,this.reset()}return o(t,[{key:"reset",value:function(){this.contactGenerator=new a.ContactGenerator(this),this.contactResolver=new s.ContactResolver(this),this.objects=[],this.idToObject={},this.joints=[],this.springs=[],this.assemblies=[],this.objectIDToAssembly={},this.addWalls()}},{key:"addWalls",value:function(){this.addObject(new c.Plane(new i.Vector(this.width/2,0),new i.Vector(0,1),this.width/2)),this.addObject(new c.Plane(new i.Vector(this.width,this.height/2),new i.Vector(-1,0),this.height/2)),this.addObject(new c.Plane(new i.Vector(0,this.height/2),new i.Vector(1,0),this.height/2)),this.addObject(new c.Plane(new i.Vector(this.width/2,this.height),new i.Vector(0,-1),this.width/2))}},{key:"addObject",value:function(t){if(this.idToObject[t.id])throw Error("Already have object with this id:"+t.id);this.objects.push(t),this.idToObject[t.id]=t}},{key:"addAssembly",value:function(t){this.assemblies.push(t);var e=!0,r=!1,n=void 0;try{for(var o,i=t.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.objectIDToAssembly[a.id]=t,this.addObject(a)}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}var s=!0,c=!1,l=void 0;try{for(var u,h=t.springs[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=u.value;this.springs.push(f)}}catch(t){c=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}var d=!0,v=!1,y=void 0;try{for(var p,b=t.joints[Symbol.iterator]();!(d=(p=b.next()).done);d=!0){var m=p.value;this.joints.push(m)}}catch(t){v=!0,y=t}finally{try{!d&&b.return&&b.return()}finally{if(v)throw y}}}},{key:"moveObjects",value:function(t){var e=t/1e3,r=this.gravityDirection.scale(this.Gravity),n=!0,o=!1,i=void 0;try{for(var a,s=this.objects[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){a.value.clearForFrame()}}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}var c=!0,l=!1,u=void 0;try{for(var h,f=this.springs[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){h.value.accumulateForces()}}catch(t){l=!0,u=t}finally{try{!c&&f.return&&f.return()}finally{if(l)throw u}}var d=!0,v=!1,y=void 0;try{for(var p,b=this.objects[Symbol.iterator]();!(d=(p=b.next()).done);d=!0){var m=p.value;m.mass!=1/0&&m.accumulateForce(r.scale(m.mass),m.position),m.setAcceleration(),m.updateVelocity(e),m.setAngularAcceleration(),m.updateAngularVelocity(e),m.applyDrag(e),m.updatePosition(e),m.updateRotation(e)}}catch(t){v=!0,y=t}finally{try{!d&&b.return&&b.return()}finally{if(v)throw y}}var w=this.contactGenerator.detectContacts();this.contactResolver.resolve(w,e)}},{key:"objectUnderPoint",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,i=this.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.isInside(t))return[a.translateRealWorldPoint(t),a]}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return[null,null]}},{key:"removeObject",value:function(t){this.springs=this.springs.filter(function(e){return e.o1.id!=t.id&&e.o2.id!=t.id}),this.objects=this.objects.filter(function(e){return e.id!=t.id}),delete this.idToObject[t.id],delete this.objectIDToAssembly[t.id]}},{key:"stats",value:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var o,i=this.objects[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;a instanceof c.Plane||t.push("p: ("+a.position.a.toFixed(2)+", "+a.position.b.toFixed(2)+") theta: "+a.rotation.toFixed(3))}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return t}}]),t}();e.World=l},function(t,e,r){e=t.exports=r(25)(void 0),e.push([t.i,"*{font-family:Open Sans,lucida grande,Segoe UI,arial,verdana,lucida sans unicode,tahoma,sans-serif!important;letter-spacing:.3px;color:#47525d;font-weight:100}body{background:#f6f9fc;margin:0}.bot-containers{display:flex;justify-content:space-between;height:300px}.bot-containers .bot-container{display:flex;flex-direction:column;width:50%}.bot-containers .bot-container textarea{flex-grow:1}",""])},function(t,e){function r(t,e){var r=t[1]||"",o=t[3];if(!o)return r;if(e&&"function"==typeof btoa){var i=n(o);return[r].concat(o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"})).concat([i]).join("\n")}return[r].join("\n")}function n(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=r(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=v[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(u(n.parts[i],e))}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(u(n.parts[i],e));v[n.id]={id:n.id,refs:1,parts:a}}}}function o(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s=i[1],c=i[2],l=i[3],u={css:s,media:c,sourceMap:l};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function i(t,e){var r=p(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=w[w.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",l(e,t.attrs),i(t,e),e}function c(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",l(e,t.attrs),i(t,e),e}function l(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function u(t,e){var r,n,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var l=m++;r=b||(b=s(e)),n=h.bind(null,r,l,!1),o=h.bind(null,r,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=c(e),n=d.bind(null,r,e),o=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(e),n=f.bind(null,r),o=function(){a(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}function h(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=j(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function d(t,e,r){var n=r.css,o=r.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(n=g(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var v={},y=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),p=function(t){var e={};return function(r){return void 0===e[r]&&(e[r]=t.call(this,r)),e[r]}}(function(t){return document.querySelector(t)}),b=null,m=0,w=[],g=r(27);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=y()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=o(t,e);return n(r,e),function(t){for(var i=[],a=0;a<r.length;a++){var s=r[a],c=v[s.id];c.refs--,i.push(c)}if(t){n(o(t,e),e)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete v[c.id]}}}};var j=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return t;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(t,e){t.exports=ReactRouter},function(t,e){t.exports=ReactRouterDOM}]);